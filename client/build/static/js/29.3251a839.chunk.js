(this["webpackJsonpcinema-plus-client"]=this["webpackJsonpcinema-plus-client"]||[]).push([[29],{459:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var n=a(0),s=a.n(n),r=a(24),i=a(225),l=a(6),o=a(8),c=a.n(o),m=a(446),h=a(447),d=a(448),g=a(449),p=a(450),v=a(467),u=a(71);class C extends n.Component{constructor(){super(...arguments),this.state={rowsPerPage:10,page:0},this.handleChangePage=(e,t)=>{this.setState({page:t})},this.handleChangeRowsPerPage=e=>{this.setState({rowsPerPage:e.target.value})},this.onFindAttr=(e,t,a)=>{const n=t.find(t=>t._id===e);return n?n[a]:`Not ${a} Found`}}render(){const{classes:e,className:t,reservations:a,movies:n,cinemas:r}=this.props,{rowsPerPage:i,page:l}=this.state,o=c()(e.root,t);return s.a.createElement(u.e,{className:o},s.a.createElement(u.f,{noPadding:!0},s.a.createElement(m.a,null,s.a.createElement(h.a,null,s.a.createElement(d.a,null,s.a.createElement(g.a,{align:"left"},"User"),s.a.createElement(g.a,{align:"left"},"Phone"),s.a.createElement(g.a,{align:"left"},"Start At"),s.a.createElement(g.a,{align:"left"},"Movie"),s.a.createElement(g.a,{align:"left"},"Cinema"),s.a.createElement(g.a,{align:"left"},"Ticket Price"),s.a.createElement(g.a,{align:"left"},"Total"),s.a.createElement(g.a,{align:"left"},"Checkin"))),s.a.createElement(p.a,null,a.sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(l*i,l*i+i).map(t=>s.a.createElement(d.a,{className:e.tableRow,hover:!0,key:t._id},s.a.createElement(g.a,{className:e.tableCell},t.username),s.a.createElement(g.a,{className:e.tableCell},t.phone),s.a.createElement(g.a,{className:e.tableCell},t.startAt),s.a.createElement(g.a,{className:e.tableCell},this.onFindAttr(t.movieId,n,"title")),s.a.createElement(g.a,{className:e.tableCell},this.onFindAttr(t.cinemaId,r,"name")),s.a.createElement(g.a,{className:e.tableCell},t.ticketPrice),s.a.createElement(g.a,{className:e.tableCell},t.total),s.a.createElement(g.a,{className:e.tableCell},t.checkin?"yes":"no"))))),s.a.createElement(v.a,{backIconButtonProps:{"aria-label":"Previous Page"},component:"div",count:a.length,nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,page:l,rowsPerPage:i,rowsPerPageOptions:[5,10,25]})))}}C.defaultProps={reservations:[],movies:[],cinemas:[],onSelect:()=>{},onShowDetails:()=>{}};var E=Object(l.a)(e=>({root:{},tableRow:{height:"64px"},tableCell:{whiteSpace:"nowrap"},tableCellInner:{display:"flex",alignItems:"center"},avatar:{backgroundColor:e.palette.primary.main,display:"inline-flex",fontSize:"14px",fontWeight:500,height:"36px",width:"36px"},nameText:{display:"inline-block",marginLeft:e.spacing(2),fontWeight:500,cursor:"pointer"}}))(C);class P extends n.Component{render(){const{classes:e,className:t,search:a,mode:n,onChangeSearch:r,onChangeMode:i}=this.props,l=c()(e.root,t);return s.a.createElement("div",{className:l},s.a.createElement("div",{className:e.row},s.a.createElement(u.k,{className:e.searchInput,placeholder:"Search reservation by Phone",value:a,onChange:r}),s.a.createElement(u.b,{mode:n,onChange:i})))}}var b=Object(l.a)(e=>({root:{},row:{height:"42px",display:"flex",alignItems:"center",marginTop:e.spacing(1),justifyContent:"space-between"},searchInput:{marginRight:e.spacing(1)}}))(P),f=a(40),w=a(388),N=a(272),x=a(390),S=a(391);a(392),a(393);class y extends n.Component{constructor(){super(...arguments),this.onFindAttr=(e,t,a)=>{const n=t.find(t=>t._id===e);return n?n[a]:`Not ${a} Found`}}render(){const{reservations:e,cinemas:t,movies:a}=this.props,n=e.map(e=>({title:`Movie: ${this.onFindAttr(e.movieId,a,"title")}-Cinema: ${this.onFindAttr(e.cinemaId,t,"name")}`,start:e.date,url:"/movie/"+e.movieId}));return s.a.createElement(w.a,{defaultView:"dayGridMonth",header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},plugins:[N.d,x.a,S.a],events:n})}}var k=y,I=a(27);class M extends n.Component{constructor(){super(...arguments),this.state={mode:"list",search:""},this.onChangeMode=()=>this.setState(e=>{let{mode:t}=e;return{mode:"grid"===t?"list":"grid"}}),this.onChangeSearch=e=>this.setState({search:e.target.value})}componentDidMount(){const{reservations:e,movies:t,cinemas:a,getReservations:n,getMovies:s,getCinemas:r}=this.props;e.length||n(),t.length||s(),a.length||r()}render(){const{mode:e,search:t}=this.state,{classes:a,reservations:n,movies:r,cinemas:l}=this.props,o=Object(I.c)(t,n,"phone");return s.a.createElement("div",{className:a.root},s.a.createElement(b,{reservations:o,search:t,onChangeSearch:this.onChangeSearch,mode:e,onChangeMode:this.onChangeMode}),s.a.createElement("div",{className:a.content},o.length?"list"===e?s.a.createElement(E,{reservations:o,movies:r,cinemas:l}):s.a.createElement(k,{reservations:o,movies:r,cinemas:l}):s.a.createElement("div",{className:a.progressWrapper},s.a.createElement(i.a,null))))}}const j={getReservations:f.o,getMovies:f.n,getCinemas:f.j};var A=Object(r.b)(e=>{let{reservationState:t,movieState:a,cinemaState:n}=e;return{reservations:t.reservations,movies:a.movies,cinemas:n.cinemas}},j)(Object(l.a)(e=>({root:{padding:e.spacing(3)},content:{marginTop:e.spacing(2)},progressWrapper:{paddingTop:"48px",paddingBottom:"24px",display:"flex",justifyContent:"center"}}))(M))}}]);
//# sourceMappingURL=29.3251a839.chunk.js.map
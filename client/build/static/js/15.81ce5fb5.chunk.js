(this["webpackJsonpcinema-plus-client"]=this["webpackJsonpcinema-plus-client"]||[]).push([[15,21],{205:function(e,a,t){"use strict";var n=t(3),i=t(1),r=t(0),s=t.n(r),l=t(4),o=t(6),c=[0,1,2,3,4,5,6,7,8,9,10],m=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function d(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=parseFloat(e);return"".concat(t/a).concat(String(e).replace(String(t),"")||"px")}var p=s.a.forwardRef((function(e,a){var t=e.alignContent,r=void 0===t?"stretch":t,o=e.alignItems,c=void 0===o?"stretch":o,m=e.classes,d=e.className,p=e.component,g=void 0===p?"div":p,u=e.container,h=void 0!==u&&u,f=e.direction,x=void 0===f?"row":f,v=e.item,b=void 0!==v&&v,E=e.justify,w=void 0===E?"flex-start":E,y=e.lg,j=void 0!==y&&y,C=e.md,N=void 0!==C&&C,S=e.sm,P=void 0!==S&&S,k=e.spacing,O=void 0===k?0:k,W=e.wrap,F=void 0===W?"wrap":W,R=e.xl,I=void 0!==R&&R,M=e.xs,T=void 0!==M&&M,z=e.zeroMinWidth,A=void 0!==z&&z,D=Object(n.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),B=Object(l.a)(m.root,d,h&&[m.container,0!==O&&m["spacing-xs-".concat(String(O))]],b&&m.item,A&&m.zeroMinWidth,"row"!==x&&m["direction-xs-".concat(String(x))],"wrap"!==F&&m["wrap-xs-".concat(String(F))],"stretch"!==c&&m["align-items-xs-".concat(String(c))],"stretch"!==r&&m["align-content-xs-".concat(String(r))],"flex-start"!==w&&m["justify-xs-".concat(String(w))],!1!==T&&m["grid-xs-".concat(String(T))],!1!==P&&m["grid-sm-".concat(String(P))],!1!==N&&m["grid-md-".concat(String(N))],!1!==j&&m["grid-lg-".concat(String(j))],!1!==I&&m["grid-xl-".concat(String(I))]);return s.a.createElement(g,Object(i.a)({className:B,ref:a},D))}));var g=Object(o.a)((function(e){return Object(i.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,a){var t={};return c.forEach((function(n){var i=e.spacing(n);0!==i&&(t["spacing-".concat(a,"-").concat(n)]={margin:"-".concat(d(i,2)),width:"calc(100% + ".concat(d(i),")"),"& > $item":{padding:d(i,2)}})})),t}(e,"xs"),{},e.breakpoints.keys.reduce((function(a,t){return function(e,a,t){var n={};m.forEach((function(e){var a="grid-".concat(t,"-").concat(e);if(!0!==e)if("auto"!==e){var i="".concat(Math.round(e/12*1e8)/1e6,"%");n[a]={flexBasis:i,flexGrow:0,maxWidth:i}}else n[a]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else n[a]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===t?Object(i.a)(e,n):e[a.breakpoints.up(t)]=n}(a,e,t),a}),{}))}),{name:"MuiGrid"})(p);a.a=g},251:function(e,a,t){"use strict";var n=t(1),i=t(3),r=t(0),s=t.n(r),l=t(4),o=t(6),c=s.a.forwardRef((function(e,a){var t=e.alt,r=e.children,o=e.classes,c=e.className,m=e.component,d=void 0===m?"div":m,p=e.imgProps,g=e.sizes,u=e.src,h=e.srcSet,f=e.variant,x=void 0===f?"circle":f,v=Object(i.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),b=null,E=u||h;return b=E?s.a.createElement("img",Object(n.a)({alt:t,src:u,srcSet:h,sizes:g,className:o.img},p)):r,s.a.createElement(d,Object(n.a)({className:Object(l.a)(o.root,o.system,o[x],c,!E&&o.colorDefault),ref:a},v),b)}));a.a=Object(o.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover"}}}),{name:"MuiAvatar"})(c)},276:function(e,a,t){"use strict";var n=t(1),i=t(3),r=t(13),s=t(0),l=t.n(s),o=t(4),c=t(6),m=t(7),d=l.a.forwardRef((function(e,a){var t=e.classes,r=e.className,s=e.component,c=void 0===s?"div":s,d=e.fixed,p=void 0!==d&&d,g=e.maxWidth,u=void 0===g?"lg":g,h=Object(i.a)(e,["classes","className","component","fixed","maxWidth"]);return l.a.createElement(c,Object(n.a)({className:Object(o.a)(t.root,r,p&&t.fixed,!1!==u&&t["maxWidth".concat(Object(m.a)(String(u)))]),ref:a},h))}));a.a=Object(c.a)((function(e){var a;return{root:(a={width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},Object(r.a)(a,e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),Object(r.a)(a,e.breakpoints.up("md"),{paddingLeft:e.spacing(4),paddingRight:e.spacing(4)}),a),fixed:Object.keys(e.breakpoints.values).reduce((function(a,t){var n=e.breakpoints.values[t];return 0!==n&&(a[e.breakpoints.up(t)]={maxWidth:n}),a}),{}),maxWidthXs:Object(r.a)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:Object(r.a)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:Object(r.a)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:Object(r.a)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:Object(r.a)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(d)},277:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var n=t(0),i=t.n(n),r=t(24),s=t(6),l=t(205),o=t(8),c=t.n(o),m=t(465),d=t(141),p=t(71);class g extends n.Component{constructor(){super(...arguments),this.state={name:"",email:"",phone:"",password:""},this.handleFieldChange=(e,a)=>{const t={...this.state};t[e]=a,this.setState(t)},this.onUpdateUser=async()=>{try{const{name:e,email:a,phone:t,password:n}=this.state,i=localStorage.getItem("jwtToken");let r={name:e,email:a,phone:t};n&&(r={...r,password:n});const s="/users/me",l=await fetch(s,{method:"PATCH",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},body:JSON.stringify(r)});if(l.ok){const e=await l.json();this.props.file&&this.props.uploadImage(e._id,this.props.file)}}catch(e){console.log(e)}}}componentDidMount(){const{name:e,email:a,phone:t}=this.props.user;this.setState({name:e,email:a,phone:t})}render(){const{classes:e,className:a}=this.props,{name:t,phone:n,email:r,password:s}=this.state,l=c()(e.root,a);return i.a.createElement(p.e,{className:l},i.a.createElement(p.h,null,i.a.createElement(p.i,{subtitle:"The information can be edited",title:"Profile"})),i.a.createElement(p.f,{noPadding:!0},i.a.createElement("form",{autoComplete:"off",noValidate:!0},i.a.createElement("div",{className:e.field},i.a.createElement(m.a,{className:e.textField,helperText:"Please specify the first name",label:"FUll Name",margin:"dense",required:!0,value:t,variant:"outlined",onChange:e=>this.handleFieldChange("name",e.target.value)}),i.a.createElement(m.a,{className:e.textField,label:"Email Address",margin:"dense",required:!0,value:r,variant:"outlined",onChange:e=>this.handleFieldChange("email",e.target.value)})),i.a.createElement("div",{className:e.field},i.a.createElement(m.a,{className:e.textField,label:"Phone Number",margin:"dense",type:"number",value:n,variant:"outlined",onChange:e=>this.handleFieldChange("phone",e.target.value)}),i.a.createElement(m.a,{className:e.textField,label:"Password",margin:"dense",type:"password",value:s,variant:"outlined",onChange:e=>this.handleFieldChange("password",e.target.value)})))),i.a.createElement(p.g,{className:e.portletFooter},i.a.createElement(d.a,{color:"primary",variant:"contained",onClick:this.onUpdateUser},"Save details")))}}var u=Object(s.a)(e=>({root:{},field:{margin:e.spacing(3)},textField:{width:"420px",maxWidth:"100%",marginRight:e.spacing(3)},portletFooter:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}}))(g),h=t(210),f=t.n(h),x=t(37),v=t(251);class b extends n.Component{render(){const{user:e,classes:a,className:t,file:n,onUpload:r}=this.props,s=c()(a.root,t);return i.a.createElement(p.e,{className:s},i.a.createElement(p.f,null,i.a.createElement("div",{className:a.details},i.a.createElement("div",{className:a.info},i.a.createElement(x.a,{variant:"h2"},e.name),i.a.createElement(x.a,{className:a.emailText,variant:"body1"},e.email),i.a.createElement(x.a,{className:a.dateText,variant:"body1"},"Join at: ",f()(e.createdAt).format("DD/MM/YYYY"))),i.a.createElement(v.a,{className:a.avatar,src:e.imageurl?e.imageurl:"/images/avatars/avatar.png"}))),i.a.createElement(p.g,null,i.a.createElement("input",{accept:"image/*",className:a.input,id:"icon-button-file",type:"file",onChange:r}),i.a.createElement("label",{htmlFor:"icon-button-file"},i.a.createElement(d.a,{className:a.uploadButton,component:"span",color:"primary",variant:"text"},"Upload picture")),i.a.createElement("span",null,n&&n.name)))}}var E=Object(s.a)(e=>({root:{},details:{display:"flex"},emailText:{marginTop:e.spacing(1),color:e.palette.text.secondary},dateText:{color:e.palette.text.secondary},avatar:{marginLeft:"auto",height:"110px",width:"110px",flexShrink:0,flexGrow:0},progressWrapper:{marginTop:e.spacing(2)},input:{display:"none"},uploadButton:{marginRight:e.spacing(2)}}))(b),w=t(40);class y extends n.Component{constructor(){super(...arguments),this.state={image:null}}render(){const{image:e}=this.state,{classes:a,user:t,uploadImage:n}=this.props;return i.a.createElement("div",{className:a.root},i.a.createElement(l.a,{container:!0,spacing:4},i.a.createElement(l.a,{item:!0,lg:4,md:6,xl:4,xs:12},i.a.createElement(E,{file:e,user:t,onUpload:e=>{const a=e.target.files[0];this.setState({image:a})}})),i.a.createElement(l.a,{item:!0,lg:8,md:6,xl:8,xs:12},i.a.createElement(u,{file:e,user:t,uploadImage:n}))))}}var j=Object(r.b)(e=>{let{authState:a}=e;return{user:a.user}},{uploadImage:w.V})(Object(s.a)(e=>({root:{padding:e.spacing(4)}}))(y))},464:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return S}));var n=t(0),i=t.n(n),r=t(24),s=t(108),l=t(276),o=t(205),c=t(37),m=t(40),d=t(8),p=t.n(d),g=t(6),u=t(446),h=t(447),f=t(448),x=t(449),v=t(450),b=t(467),E=t(71);class w extends n.Component{constructor(){super(...arguments),this.state={rowsPerPage:10,page:0},this.handleChangePage=(e,a)=>{this.setState({page:a})},this.handleChangeRowsPerPage=e=>{this.setState({rowsPerPage:e.target.value})},this.onFindAttr=(e,a,t)=>{const n=a.find(a=>a._id===e);return n?n[t]:`Not ${t} Found`}}render(){const{classes:e,className:a,reservations:t,movies:n,cinemas:r}=this.props,{rowsPerPage:s,page:l}=this.state,o=p()(e.root,a);return i.a.createElement(E.e,{className:o},i.a.createElement(E.f,{noPadding:!0},i.a.createElement(u.a,null,i.a.createElement(h.a,null,i.a.createElement(f.a,null,i.a.createElement(x.a,{align:"left"},"Movie"),i.a.createElement(x.a,{align:"left"},"Cinema"),i.a.createElement(x.a,{align:"left"},"Date"),i.a.createElement(x.a,{align:"left"},"Start At"),i.a.createElement(x.a,{align:"left"},"Ticket Price"),i.a.createElement(x.a,{align:"left"},"Total"))),i.a.createElement(v.a,null,t.slice(l*s,l*s+s).map(a=>i.a.createElement(f.a,{className:e.tableRow,hover:!0,key:a._id},i.a.createElement(x.a,{className:e.tableCell},this.onFindAttr(a.movieId,n,"title")),i.a.createElement(x.a,{className:e.tableCell},this.onFindAttr(a.cinemaId,r,"name")),i.a.createElement(x.a,{className:e.tableCell},new Date(a.date).toLocaleDateString()),i.a.createElement(x.a,{className:e.tableCell},a.startAt),i.a.createElement(x.a,{className:e.tableCell},a.ticketPrice),i.a.createElement(x.a,{className:e.tableCell},a.total))))),i.a.createElement(b.a,{backIconButtonProps:{"aria-label":"Previous Page"},component:"div",count:t.length,nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,page:l,rowsPerPage:s,rowsPerPageOptions:[5,10,25]})))}}w.defaultProps={reservations:[],movies:[],cinemas:[],onSelect:()=>{},onShowDetails:()=>{}};var y=Object(g.a)(e=>({root:{},tableRow:{height:"64px"},tableCell:{whiteSpace:"nowrap"},tableCellInner:{display:"flex",alignItems:"center"},avatar:{backgroundColor:e.palette.primary.main,display:"inline-flex",fontSize:"14px",fontWeight:500,height:"36px",width:"36px"},nameText:{display:"inline-block",marginLeft:e.spacing(2),fontWeight:500,cursor:"pointer"}}))(w),j=t(277);const C=Object(s.a)(e=>({title:{fontSize:"3rem",lineHeight:"3rem",textAlign:"center",textTransform:"capitalize",marginTop:e.spacing(15),marginBottom:e.spacing(3)},[e.breakpoints.down("sm")]:{fullWidth:{width:"100%"}}}));const N={getMovies:m.n,getReservations:m.o,getCinemas:m.j};var S=Object(r.b)(e=>{let{authState:a,movieState:t,reservationState:n,cinemaState:i}=e;return{user:a.user,movies:t.movies,reservations:n.reservations,cinemas:i.cinemas}},N)((function(e){const{user:a,reservations:t,movies:r,cinemas:s,getMovies:m,getReservations:d,getCinemas:p}=e;Object(n.useEffect)(()=>{m(),d(),p()},[m,d,p]);const g=C(e),u=t.filter(e=>e.username===a.username);return console.log(u),i.a.createElement(l.a,null,i.a.createElement(o.a,{container:!0,spacing:2},!!u.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{item:!0,xs:12},i.a.createElement(c.a,{className:g.title,variant:"h2",color:"inherit"},"My Reservations")),i.a.createElement(o.a,{item:!0,xs:12},i.a.createElement(y,{reservations:u,movies:r,cinemas:s}))),i.a.createElement(o.a,{item:!0,xs:12},i.a.createElement(c.a,{className:g.title,variant:"h2",color:"inherit"},"My Account")),i.a.createElement(o.a,{item:!0,xs:12},i.a.createElement(j.default,null))))}))}}]);
//# sourceMappingURL=15.81ce5fb5.chunk.js.map